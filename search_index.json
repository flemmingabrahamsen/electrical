[["index.html", "Power-Electronic Control Handbook Chapter 1 Preface", " Power-Electronic Control Handbook Flemming Abrahamsen 2023-03-25 Chapter 1 Preface This is a collection of technical notes centered around control of power electronics and drives. "],["transformations.html", "Chapter 2 Transformations 2.1 Vector definition 2.2 Vector Amplitude 2.3 abc &lt;-&gt; alpha-beta 2.4 abc &lt;-&gt; AB0 2.5 Line-Line &lt;-&gt; AB 2.6 Rotation", " Chapter 2 Transformations 2.1 Vector definition \\[ \\begin{aligned} \\underline{v} &amp; = \\frac{2}{3} \\left( v_a + v_b e^{j \\frac{2 \\pi}{3}}+ v_c e^{j \\frac{4 \\pi}{3}} \\right)\\\\ &amp; = \\frac{2}{3} \\left( v_a + v_b (- \\frac{1}{2}+j\\frac{\\sqrt{3}}{2}) + v_c (- \\frac{1}{2}-j\\frac{\\sqrt{3}}{2}) \\right)\\\\ &amp; = \\left(\\frac{2}{3} v_a - \\frac{1}{3} (v_b+v_c) \\right) + j \\left( \\frac{1}{\\sqrt{3}} (v_b-v_c) \\right) \\\\ &amp; = \\frac{2}{3} \\left( v_a - \\frac{1}{2} (v_b+v_c) \\right) + j \\frac{2}{3} \\left( \\frac{\\sqrt{3}}{2} (v_b-v_c) \\right) \\\\ &amp; = v_\\alpha + j v_\\beta \\\\ \\end{aligned} \\tag{2.1} \\] 2.2 Vector Amplitude 2.2.1 Vector amplitude from alpha-beta \\[ |\\underline{v}| = \\sqrt{v_\\alpha^2 + v_\\beta^2} \\tag{2.2} \\] 2.2.2 Vector amplitude from abc \\[ \\begin{aligned} |\\underline{v}| &amp;= \\sqrt{v_\\alpha^2 + v_\\beta^2} \\\\ &amp; = \\sqrt{\\left(\\frac{2}{3}( v_a - \\frac{1}{2} (v_b+v_c)) \\right)^2 + \\left(\\frac{2}{3} (\\frac{\\sqrt{3}}{2} (v_b-v_c) )\\right)^2 } \\\\ &amp; = \\frac{2}{3} \\sqrt{\\left( v_a - \\frac{1}{2} (v_b+v_c) \\right)^2 + \\left( \\frac{\\sqrt{3}}{2} (v_b-v_c) \\right)^2 } \\\\ &amp; = \\frac{2}{3} \\sqrt{ v_a^2 + \\frac{1}{4}(v_b^2+v_c^2+2v_b v_c)-v_a(v_b+v_c) + \\frac{3}{4} (v_b^2+v_c^2-2v_bv_c) } \\\\ &amp; = \\frac{2}{3} \\sqrt{ v_a^2 + v_b^2 + v_c^2 -v_a v_b -v_b v_c -v_c v_a } \\\\ \\end{aligned} \\tag{2.3} \\] 2.3 abc &lt;-&gt; alpha-beta 2.3.1 abc with zero to alpha-beta The abc to alpha-beta transformation where the abc-system may contain a zero-component is: \\[ \\begin{aligned} v_\\alpha &amp;= \\frac{2}{3} \\left( v_a - \\frac{1}{2} (v_b+v_c) \\right) = \\frac{2}{3} v_a - \\frac{1}{3} (v_b+v_c) = \\frac{1}{3} ( 2 v_a - v_b-v_c) \\\\ v_\\beta &amp;= \\frac{2}{3} \\left( \\frac{\\sqrt{3}}{2} (v_b-v_c) \\right)= \\frac{1}{\\sqrt{3}} (v_b-v_c) \\\\ \\end{aligned} \\tag{2.4} \\] Matrix form: \\[ \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} = \\frac{2}{3} \\begin{bmatrix} 1 &amp; -\\frac{1}{2} &amp; -\\frac{1}{2} \\\\ 0 &amp; \\frac{\\sqrt{3}}{2} &amp; -\\frac{\\sqrt{3}}{2} \\end{bmatrix} \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} = \\begin{bmatrix} \\frac{2}{3} &amp; -\\frac{1}{3} &amp; -\\frac{1}{3} \\\\ 0 &amp; \\frac{1}{\\sqrt{3}} &amp; -\\frac{1}{\\sqrt{3}} \\end{bmatrix} \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} \\tag{2.5} \\] 2.3.2 abc without zero to AB If the abc-system has no zero-component, so \\(v_a=-(v_b+v_c)\\), we can simplify: \\[ \\begin{aligned} v_\\alpha &amp;= v_a\\\\ v_\\beta &amp;= \\frac{1}{\\sqrt{3}} (v_b-v_c) \\\\ \\end{aligned} \\tag{2.5} \\] Written in matrix form: \\[ \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; 0 \\\\ 0 &amp; \\frac{1}{\\sqrt{3}} &amp; -\\frac{1}{\\sqrt{3}} \\end{bmatrix} \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} \\tag{2.6} \\] 2.3.3 AB to abc This transformation will give an abc-system without a zero-component, as the alpha-beta system does not contain a zero-component. \\[ \\begin{aligned} v_a &amp;= v_\\alpha \\\\ v_b &amp;= - \\frac{1}{2}(v_\\alpha -\\sqrt{3}v_\\beta) \\\\ v_c &amp;= - \\frac{1}{2}(v_\\alpha +\\sqrt{3}v_\\beta) \\\\ \\end{aligned} \\tag{2.7} \\] In matrix form: \\[ \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 \\\\ -\\frac{1}{2} &amp; \\frac{\\sqrt{3}}{2} \\\\ -\\frac{1}{2} &amp; -\\frac{\\sqrt{3}}{2} \\end{bmatrix} \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} \\tag{2.8} \\] 2.4 abc &lt;-&gt; AB0 The two-component alpha-beta system does not contain a zero-component, so if the zero-component of the abc-system must be preserved in the alpha-beta system, a third zero component must be included. 2.4.1 abc -&gt; AB0 \\[ \\begin{aligned} v_\\alpha &amp;= \\frac{2}{3}(v_a - \\frac{1}{2}(v_b+v_c)) = \\frac{2}{3}v_a - \\frac{1}{3}(v_b+v_c) = \\frac{1}{3} ( 2 v_a - v_b-v_c)\\\\ v_\\beta &amp;= \\frac{1}{\\sqrt{3}}(v_b-v_c) \\\\ v_0 &amp;= \\frac{1}{3}(v_a+v_b+v_c) \\end{aligned} \\tag{2.9} \\] Written in matrix form: \\[ \\begin{bmatrix} \\alpha \\\\ \\beta \\\\ 0 \\end{bmatrix} = \\frac{2}{3} \\begin{bmatrix} 1 &amp; -\\frac{1}{2} &amp; -\\frac{1}{2} \\\\ 0 &amp; \\frac{\\sqrt{3}}{2} &amp; -\\frac{\\sqrt{3}}{2} \\\\ \\frac{1}{2} &amp; \\frac{1}{2} &amp; \\frac{1}{2} \\end{bmatrix} \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} = \\begin{bmatrix} \\frac{2}{3} &amp; -\\frac{1}{3} &amp; -\\frac{1}{3} \\\\ 0 &amp; \\frac{1}{\\sqrt{3}} &amp; -\\frac{1}{\\sqrt{3}} \\\\ \\frac{1}{3} &amp; \\frac{1}{3} &amp; \\frac{1}{3} \\end{bmatrix} \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} \\tag{2.10} \\] 2.4.2 AB0 -&gt; abc \\[ \\begin{aligned} v_a &amp;= v_0 + v_\\alpha \\\\ v_b &amp;= v_0 - \\frac{1}{2}(v_\\alpha +\\sqrt{3}v_\\beta) \\\\ v_c &amp;= v_0 - \\frac{1}{2}(v_\\alpha -\\sqrt{3}v_\\beta) \\\\ \\end{aligned} \\tag{2.7} \\] \\[ \\begin{bmatrix} a\\\\ b \\\\ c \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; 1 \\\\ -\\frac{1}{2} &amp; \\frac{\\sqrt{3}}{2} &amp; 1 \\\\ -\\frac{1}{2} &amp; -\\frac{\\sqrt{3}}{2} &amp; 1 \\end{bmatrix} \\begin{bmatrix} \\alpha\\\\ \\beta \\\\ 0 \\end{bmatrix} \\tag{2.7} \\] 2.5 Line-Line &lt;-&gt; AB The line-line voltage are between phases: a-b, b-c, c-a. 2.5.1 Line-Line -&gt; AB From above we have the formula: \\[ \\begin{aligned} v_\\alpha &amp;= \\frac{1}{3} ( 2 v_a - v_b-v_c) = \\frac{1}{3} ( (v_a - v_b)-(v_c-v_a))= \\frac{1}{3} ( v_{ab} - v_{ca}) \\\\ v_\\beta &amp;= \\frac{1}{\\sqrt{3}} (v_b-v_c) = \\frac{1}{\\sqrt{3}} v_{bc} \\\\ \\end{aligned} \\tag{2.4} \\] Written in matrix form: \\[ \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} = \\begin{bmatrix} \\frac{1}{3} &amp; 0 &amp; -\\frac{1}{3} \\\\ 0 &amp; \\frac{1}{3} &amp; -\\frac{1}{3} \\end{bmatrix} \\begin{bmatrix} ab\\\\ bc \\\\ ca \\end{bmatrix} \\tag{2.6} \\] 2.5.2 AB -&gt; Line-Line \\[ \\begin{aligned} v_{ab} &amp;= v_a - v_b =v_\\alpha + \\frac{1}{2}(v_\\alpha -\\sqrt{3}v_\\beta) =\\frac{3}{2}v_\\alpha - \\frac{\\sqrt{3}}{2}v_\\beta =\\frac{3}{2} (v_\\alpha - \\frac{1}{\\sqrt{3}}v_\\beta ) \\\\ v_{bc} &amp;= v_b - v_c = - \\frac{1}{2}(v_\\alpha -\\sqrt{3}v_\\beta)+ \\frac{1}{2}(v_\\alpha +\\sqrt{3}v_\\beta) = \\sqrt{3}v_\\beta \\\\ v_{bc} &amp;= v_c - v_a = - \\frac{1}{2}(v_\\alpha +\\sqrt{3}v_\\beta) - v_\\alpha = -\\frac{3}{2}v_\\alpha - \\frac{\\sqrt{3}}{2}v_\\beta =\\frac{3}{2} (-v_\\alpha - \\frac{1}{\\sqrt{3}}v_\\beta ) \\\\ \\end{aligned} \\tag{2.4} \\] In matrix form: \\[ \\begin{bmatrix} ab\\\\ bc \\\\ ca \\end{bmatrix} = \\begin{bmatrix} \\frac{3}{2} &amp; -\\frac{\\sqrt{3}}{2} \\\\ 0 &amp; \\sqrt{3} \\\\ -\\frac{3}{2} &amp; -\\frac{\\sqrt{3}}{2} \\end{bmatrix} \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} = \\frac{3}{2} \\begin{bmatrix} 1 &amp; -\\frac{1}{\\sqrt{3}} \\\\ 0 &amp; \\frac{2}{\\sqrt{3}} \\\\ -1 &amp; -\\frac{1}{\\sqrt{3}} \\end{bmatrix} \\begin{bmatrix} \\alpha\\\\ \\beta \\end{bmatrix} \\tag{2.6} \\] 2.6 Rotation This is the general matrix for rotation, which rotates a vector in positive direction with angle \\(\\theta\\). \\[ \\begin{bmatrix} \\cos\\theta &amp; -\\sin\\theta \\\\ \\sin\\theta &amp; \\cos\\theta \\end{bmatrix} \\tag{2.11} \\] 2.6.1 dq -&gt; alpha-beta Dq to alpha-beta is a forward rotation, so it is: \\[ \\begin{bmatrix} \\alpha \\\\ \\beta \\end{bmatrix} = \\begin{bmatrix} \\cos\\theta &amp; -\\sin\\theta \\\\ \\sin\\theta &amp; \\cos\\theta \\end{bmatrix} \\begin{bmatrix} d \\\\ q \\end{bmatrix} \\tag{2.12} \\] 2.6.2 alpha-beta -&gt; dq Alpha-beta to Dq is a backward rotation, so it is: \\[ \\begin{bmatrix} d \\\\ q \\end{bmatrix}= \\begin{bmatrix} \\cos\\theta &amp; \\sin\\theta \\\\ -\\sin\\theta &amp; \\cos\\theta \\end{bmatrix} \\begin{bmatrix} \\alpha \\\\ \\beta \\end{bmatrix} \\tag{2.13} \\] "],["modulation.html", "Chapter 3 Modulation 3.1 Two-Level Space Vectors 3.2 Calculation of duty-cycles. 3.3 Space Vector Modulation (SVM). 3.4 Duty-cycle function expression. 3.5 Calculation of duty-cycle from phase-voltage references.", " Chapter 3 Modulation The modulation described here is based on space-vectors. 3.1 Two-Level Space Vectors Two-level modulation has six active vectors and two zero-vectors. Each vector is calculated from the general voltage vector formula as here below. The voltage vector subscript denotes the switch level for phases a, b and c, where 1 means the voltage is clamped to high rail of the dc-link voltage and 0 means the voltage is clamped to the low rail. \\[ \\begin{aligned} \\underline{v}_{100} &amp; = \\frac{2}{3} \\left( \\frac{V_d}{2} - \\frac{V_d}{2} e^{j \\frac{2 \\pi}{3}}- \\frac{V_d}{2} e^{j \\frac{4 \\pi}{3}} \\right)\\\\ &amp; = \\frac{2}{3} \\frac{V_d}{2} \\left( 1- (- \\frac{1}{2}+j\\frac{\\sqrt{3}}{2}) - (- \\frac{1}{2}-j\\frac{\\sqrt{3}}{2}) \\right)\\\\ &amp; = \\frac{2}{3} \\frac{V_d}{2} 2\\\\ &amp; = \\frac{2}{3} V_d\\\\ \\end{aligned} \\] Figure 3.1: Hexagon with the six active vectors and two zero vector. Similarly, all the vectors are derived as: \\[ \\begin{aligned} \\underline{v}_{000} &amp; = 0\\\\ \\underline{v}_{100} &amp; = \\frac{2}{3} V_d\\\\ \\underline{v}_{110} &amp; = \\frac{2}{3} V_d (\\frac{1}{2}+j\\frac{\\sqrt{3}}{2})\\\\ \\underline{v}_{010} &amp; = \\frac{2}{3} V_d (-\\frac{1}{2}+j\\frac{\\sqrt{3}}{2})\\\\ \\underline{v}_{011} &amp; = -\\frac{2}{3} V_d\\\\ \\underline{v}_{001} &amp; = \\frac{2}{3} V_d (-\\frac{1}{2}-j\\frac{\\sqrt{3}}{2})\\\\ \\underline{v}_{101} &amp; = \\frac{2}{3} V_d (\\frac{1}{2}-j\\frac{\\sqrt{3}}{2})\\\\ \\underline{v}_{111} &amp; = 0\\\\ \\end{aligned} \\] 3.2 Calculation of duty-cycles. It is possible realize a voltage vector anywhere inside the hexagon on the figure above. Any reference voltage will be located in one of the six sectors, and as it generally desired to avoid unnecessary switching, the reference vector will be realized with the two neighboring active vectors and zero-vectors by geometrical considerations. Figure 3.2: A sector of the modulation hexagon. The duty-cycles are calculated here, from sector 1 on the figure above. \\[ \\begin{aligned} \\underline{v}_{ref} &amp; = d_1 \\underline{v}_{100} + d_2 \\underline{v}_{110}\\\\ &amp; = d_1 \\frac{2}{3} V_d + d_2 \\frac{2}{3} V_d (\\frac{1}{2}+j\\frac{\\sqrt{3}}{2})\\\\ &amp; = \\frac{2}{3} V_d ( d_1 + d_2 (\\frac{1}{2}+j\\frac{\\sqrt{3}}{2}))\\\\ &amp; = \\frac{2}{3} V_d ( (d_1 + d_2 \\frac{1}{2})+jd_2\\frac{\\sqrt{3}}{2})\\\\ \\end{aligned} \\] Splitting into real and imaginary parts, we get from the imaginary part: \\[ \\begin{aligned} | \\underline{v}_{ref}| \\sin\\theta &amp; = \\frac{2}{3} V_d d_2 \\frac{\\sqrt{3}}{2}\\\\ \\Rightarrow | \\underline{v}_{ref}| \\sin\\theta &amp; = \\frac{2}{3} V_d d_2 \\frac{\\sqrt{3}}{2}\\\\ \\Rightarrow d_2 &amp; = \\frac{|\\underline{v}_{ref}|}{V_d/\\sqrt{3}} \\sin\\theta \\\\ \\end{aligned} \\] And from the real part: \\[ \\begin{aligned} | \\underline{v}_{ref}| \\cos\\theta &amp; = \\frac{2}{3} V_d ( d_1 + d_2 \\frac{1}{2})\\\\ \\Rightarrow d_1 &amp; = \\frac{3}{2} \\frac{|\\underline{v}_{ref}|}{V_d} \\cos\\theta - \\frac{1}{2}d_2\\\\ \\Rightarrow d_1 &amp; = \\frac{\\sqrt{3}}{2} \\frac{|\\underline{v}_{ref}|}{V_d/\\sqrt{3}} \\cos\\theta - \\frac{1}{2}d_2\\\\ \\end{aligned} \\] The modulation index is defined as \\(m_i=|\\underline{v}_{ref}|/(V_d/\\sqrt{3})\\), so the duty-cycles can be formulated as: \\[ \\begin{aligned} d_2 &amp; = m_i \\sin\\theta \\\\ d_1 &amp; = \\frac{\\sqrt{3}}{2} m_i \\cos\\theta - \\frac{1}{2}d_2\\\\ \\end{aligned} \\] Instead of projecting on the real and imaginary axes, we can make a projection onto the axis perpendicular to \\(v_{110}\\): \\[ \\begin{aligned} d_1|\\underline{v}_{110}| \\frac{\\sqrt{3}}{2} &amp; = |\\underline{v}_{ref}|\\sin(\\frac{\\pi}{3}-\\theta) \\\\ \\Rightarrow d_1 \\frac{2}{3} V_d \\frac{\\sqrt{3}}{2} &amp; = |\\underline{v}_{ref}|\\sin(\\frac{\\pi}{3}-\\theta)\\\\ \\Rightarrow d_1 &amp; = \\frac{|\\underline{v}_{ref}|}{V_d/\\sqrt{3}} \\sin(\\frac{\\pi}{3}-\\theta)\\\\ \\Rightarrow d_1 &amp; = m_i \\sin(\\frac{\\pi}{3}-\\theta)\\\\ \\end{aligned} \\] This way the duty-cycles can be calculated as: \\[ \\begin{aligned} d_1 &amp; = m_i \\sin(\\frac{\\pi}{3}-\\theta)\\\\ d_2 &amp; = m_i \\sin\\theta \\\\ \\end{aligned} \\] Furthermore, the zero-vector dutycycle is: \\[ d_0 = 1 - d_1 - d_2 \\] 3.3 Space Vector Modulation (SVM). In space vector modulation the active vectors are placed in the middle and the zero-vectors are evenly placed in the beginning and the end. An example is shown here: Figure 3.3: Pwm pulses over one switching period for sector 1 with spacevector modulation. Figure 3.4: Spacevector modulation pulses for all six sectors. The duty-cycles for phases a, b and c are calculated as: \\[ \\begin{aligned} \\text{sector 1}&amp;\\\\ d_a &amp; = d_0/2 + d_2+d_1\\\\ d_b &amp; = d_0/2 + d_2\\\\ d_c &amp; = d_0/2\\\\ \\text{sector 2}&amp;\\\\ d_a &amp; = d_0/2 + d_1\\\\ d_b &amp; = d_0/2 + d_1+d_2\\\\ d_c &amp; = d_0/2\\\\ \\text{sector 3}&amp;\\\\ d_a &amp; = d_0/2 \\\\ d_b &amp; = d_0/2 + d_2+d_1\\\\ d_c &amp; = d_0/2 + d_2\\\\ \\text{sector 4}&amp;\\\\ d_a &amp; = d_0/2\\\\ d_b &amp; = d_0/2 + d_1\\\\ d_c &amp; = d_0/2 + d_1+d_2\\\\ \\text{sector 5}&amp;\\\\ d_a &amp; = d_0/2 + d_2\\\\ d_b &amp; = d_0/2\\\\ d_c &amp; = d_0/2 + d_2+d_1\\\\ \\text{sector 6}&amp;\\\\ d_a &amp; = d_0/2 + d_1+d_2\\\\ d_b &amp; = d_0/2\\\\ d_c &amp; = d_0/2 + d_1\\\\ \\end{aligned} \\] Figure 3.5: Spacevector modulation duty-cycle for phase a, b, and c, for modulation index = 1. 3.4 Duty-cycle function expression. The duty-cycles are reformulated for sector 1, by inserting \\(d_0 = 1-d_1-d_2\\) in the expression above: \\[ \\begin{aligned} d_a &amp; = \\frac{1}{2} (1+ d_1+d_2)\\\\ d_b &amp; = \\frac{1}{2} (1- d_1+d_2)\\\\ d_c &amp; = \\frac{1}{2} (1- d_1-d_2)\\\\ \\end{aligned} \\] For sector 1 we get: \\[ \\begin{aligned} d_a &amp; = \\frac{1}{2} (1+ d_1+d_2)\\\\ &amp; = \\frac{1}{2} (1+ (\\frac{\\sqrt{3}}{2} m_i \\cos\\theta - \\frac{1}{2}d_2)+d_2) \\\\ &amp; = \\frac{1}{2} (1+ \\frac{\\sqrt{3}}{2} m_i \\cos\\theta + \\frac{1}{2} m_i \\sin\\theta ) \\\\ &amp; = \\frac{1}{2} + \\frac{1}{2} m_i( \\frac{\\sqrt{3}}{2} \\cos\\theta + \\frac{1}{2} \\sin\\theta ) \\\\ \\end{aligned} \\] \\[ \\begin{aligned} d_b &amp; = \\frac{1}{2} (1- d_1+d_2)\\\\ &amp; = \\frac{1}{2} (1- (\\frac{\\sqrt{3}}{2} m_i \\cos\\theta - \\frac{1}{2}d_2)+d_2) \\\\ &amp; = \\frac{1}{2} (1- \\frac{\\sqrt{3}}{2} m_i \\cos\\theta + \\frac{3}{2} m_i \\sin\\theta ) \\\\ &amp; = \\frac{1}{2} - \\frac{1}{2} m_i( \\frac{\\sqrt{3}}{2} \\cos\\theta - \\frac{3}{2} \\sin\\theta ) \\\\ \\end{aligned} \\] \\[ \\begin{aligned} d_c &amp; = \\frac{1}{2} (1- d_1-d_2)\\\\ &amp; = \\frac{1}{2} (1- (\\frac{\\sqrt{3}}{2} m_i \\cos\\theta - \\frac{1}{2}d_2)-d_2) \\\\ &amp; = \\frac{1}{2} (1- \\frac{\\sqrt{3}}{2} m_i \\cos\\theta - \\frac{1}{2} m_i \\sin\\theta ) \\\\ &amp; = \\frac{1}{2} - \\frac{1}{2} m_i( \\frac{\\sqrt{3}}{2} \\cos\\theta + \\frac{1}{2} \\sin\\theta ) \\\\ \\end{aligned} \\] 3.5 Calculation of duty-cycle from phase-voltage references. As an alternative to calculate the duty-cycles from the space-vector, they can be calculated from the phase-voltage references directly. \\[ \\begin{aligned} d_a &amp; = \\frac{1}{2} \\left( \\frac{(v_{ref,a} - v_{cm})}{V_d/2} +1 \\right) = \\frac{1}{2} +\\frac{1}{V_d} (v_{ref,a} - v_{cm}) \\\\ d_b &amp; = \\frac{1}{2} \\left( \\frac{(v_{ref,b} - v_{cm})}{V_d/2} +1 \\right) = \\frac{1}{2} +\\frac{1}{V_d} (v_{ref,b} - v_{cm}) \\\\ d_c &amp; = \\frac{1}{2} \\left( \\frac{(v_{ref,c} - v_{cm})}{V_d/2} +1 \\right) = \\frac{1}{2} +\\frac{1}{V_d} (v_{ref,c} - v_{cm}) \\\\ \\end{aligned} \\] where: \\(v_{ref,a}\\): reference voltage, phase a, phase-zero voltage. \\(v_{ref,b}\\): reference voltage, phase b, phase-zero voltage. \\(v_{ref,c}\\): reference voltage, phase c, phase-zero voltage. \\(v_{cm}\\): common-mode voltage. \\(V_d\\): Dc-link voltage. \\(d_a\\): duty-cycle, phase a, range 0-1. \\(d_b\\): duty-cycle, phase b, range 0-1. \\(d_c\\): duty-cycle, phase c, range 0-1. The common-mode voltage can have any shape, and space-vector modulation is achieved with this common-mode signal, which is the mean value of the max and min phase voltage references: \\[ \\begin{aligned} v_{cm} &amp; = \\frac{1}{2} ( \\text{min}(v_a, v_b, v_c) + \\text{max}(v_a, v_b, v_c))\\\\ \\end{aligned} \\] We can now show that this does give the same result as the previously derived expressions. As an example of this, we calculate the duty-cycle for phase a in sector 1. From the figure below we can see that phase a is the highest and phase c the lowest. Figure 3.6: Voltage references for phase a, b, and c. \\[ \\begin{aligned} v_a-v_{cm} &amp; = |\\underline{v}_{ref}| \\left( \\cos{\\theta} - \\frac{1}{2}(\\cos{\\theta} + \\cos{(\\theta - 4\\pi/3)}) \\right)\\\\ &amp; = |\\underline{v}_{ref}| \\left( \\cos{\\theta} - \\frac{1}{2}(\\cos{\\theta} + \\cos{(4\\pi/3)}\\cos{\\theta}+\\sin{( 4\\pi/3)}\\sin{\\theta}) \\right)\\\\ &amp; = |\\underline{v}_{ref}| \\left( \\cos{\\theta} - \\frac{1}{2}(\\cos{\\theta} - \\frac{1}{2}\\cos{\\theta} - \\frac{\\sqrt{3}}{2}\\sin{\\theta}) \\right)\\\\ &amp; = |\\underline{v}_{ref}| ( \\frac{3}{4} \\cos{\\theta} + \\frac{\\sqrt{3}}{4}\\sin{\\theta} )\\\\ \\end{aligned} \\] Now the duty-cycle can be derived as: \\[ \\begin{aligned} d_a &amp; = \\frac{1}{2} +\\frac{1}{V_d} (v_{ref,a} - v_{cm}) \\\\ &amp; = \\frac{1}{2} +\\frac{1}{V_d} |\\underline{v}_{ref}| ( \\frac{3}{4} \\cos{\\theta} + \\frac{\\sqrt{3}}{4}\\sin{\\theta} ) \\\\ &amp; = \\frac{1}{2} + \\frac{1}{2} \\frac{|\\underline{v}_{ref}|}{V_d/\\sqrt{3}} ( \\frac{\\sqrt{3}}{2} \\cos{\\theta} + \\frac{1}{2}\\sin{\\theta} ) \\\\ &amp; = \\frac{1}{2} + \\frac{1}{2} m_i ( \\frac{\\sqrt{3}}{2} \\cos{\\theta} + \\frac{1}{2}\\sin{\\theta} ) \\\\ \\end{aligned} \\] In the similar way, the expression can be derived for the other phases and other sectors. "],["filters.html", "Chapter 4 Filters 4.1 Nomenclature 4.2 Analog Filters", " Chapter 4 Filters This chapter gives an overview of the most used basic filters, such as low-pass, high-pass, band-pass, band-stop, and integrator. 4.1 Nomenclature s: Laplace operator. \\(\\tau\\): time-constant. \\(\\omega_c\\): Filter cut-off frequency (rad/s). 4.2 Analog Filters 4.2.1 Low-pass filter 1st order The transfer function of a 1st order low-pass filter is: \\[ G(s) = \\frac{1}{\\tau s + 1} = \\frac{\\omega_c}{s + \\omega_c} \\tag{4.1} \\] Figure 3.1: Bode-plot example of 1st order low-pass filter. 4.2.2 High-pass filter 1st order The transfer function of a 1st order high-pass filter is: \\[ G(s) = \\frac{\\tau s}{\\tau s + 1} = \\frac{s}{s + \\omega_c} \\tag{4.2} \\] Figure 3.2: Bode-plot example of 1st order high-pass filter. 4.2.3 Low-pass filter 2nd order The transfer function of a 2nd order low-pass filter is: \\[ G(s) = \\frac{1}{(\\tau s)^2 + 2\\zeta \\tau s + 1} = \\frac{\\omega_c^2}{s^2 + 2\\zeta \\omega_c s + \\omega_c^2} \\tag{4.3} \\] Figure 3.3: Bode-plot example of 2nd order low-pass filter. 4.2.4 High-pass filter 2nd order The transfer function of a 2nd order high-pass filter is: \\[ G(s) = \\frac{(\\tau s)^2}{(\\tau s)^2 + 2\\zeta \\tau s + 1} = \\frac{s^2}{s^2 + 2\\zeta \\omega_c s + \\omega_c^2} \\tag{4.4} \\] Figure 3.4: Bode-plot example of 2nd order high-pass filter. 4.2.5 Band-pass filter The transfer function of a band-pass filter is: \\[ G_{bpf}(s) = \\frac{2\\zeta \\tau s}{(\\tau s)^2 + 2\\zeta \\tau s + 1} = \\frac{2\\zeta \\omega_c s}{s^2 + 2\\zeta \\omega_c s + \\omega_c^2} \\tag{4.5} \\] Figure 3.5: Bode-plot example of a band-pass filter. 4.2.6 Band-stop filter The transfer function of a band-stop filter (notch filter) is: \\[ G_{bsf}(s) = \\frac{(\\tau s)^2 + 2\\zeta_n \\tau s + 1}{(\\tau s)^2 + 2\\zeta_d \\tau s + 1} =\\frac{s^2 + 2\\zeta_n \\omega_c s + \\omega_c^2}{s^2 + 2\\zeta_d \\omega_c s + \\omega_c^2} \\tag{4.6} \\] where \\(\\zeta_n\\) and \\(\\zeta_d\\) denote the nominator and denominator damping-factors. The gain at the notch-frequency is: \\[ G_{bsf}(j\\omega_c) = \\frac{\\zeta_n }{\\zeta_d } \\tag{4.7} \\] We can choose to reformulate the transfer-function as: \\[ G_{bsf}(s) = \\frac{(\\tau s)^2 + 2K_{damp}\\zeta \\tau s + 1}{(\\tau s)^2 + 2\\zeta \\tau s + 1} =\\frac{s^2 + 2K_{damp}\\zeta \\omega_c s + \\omega_c^2}{s^2 + 2\\zeta \\omega_c s + \\omega_c^2} \\tag{4.6} \\] where \\(K_{damp}\\) is a damping factor. For example, if we want 100 times (40 dB) damping at the notch-frequency, we set \\(K_{damp} = 0.01\\). Figure 3.6: Bode-plot example of a band-stop filter. 4.2.7 Integrator with Finite dc-gain An integrator may be used in control schemes, for example to calculate flux by integrating voltage. This may practically be done by combining the integrator with a high-pass filter to avoid an infinite dc-gain, which can cause problems with measurement offset etc. The transfer function is: \\[ G(s) = \\frac{\\tau s}{(\\tau s + 1)s} = \\frac{\\tau}{\\tau s + 1} \\tag{4.8} \\] Figure 4.1: Bode-plot example of an integrator with finite dc-gain. This implementation will not completely remove a dc-offset, but as in this example, with a -20 dB dc-gain, an offset on the input is reduced with a factor 10 on the output. So if any dc-offset should be completely removed, then one more high-pass filter must be added. "],["induction-machine.html", "Chapter 5 Induction Machine 5.1 Nomenclature 5.2 Introduction 5.3 General Machine Model 5.4 Rotor-flux Oriented Model", " Chapter 5 Induction Machine 5.1 Nomenclature \\(\\underline{v}_s\\): Stator voltage vector. \\(\\underline{v}_r\\): Rotor voltage vector. \\(R_s\\): Stator resistance. \\(R_r\\): Rotor resistance. \\(\\underline{\\psi}_s\\): Stator flux linkage. \\(\\underline{\\psi}_r\\): Rotor flux linkage. \\(\\omega_c\\): Angular frequency of reference frame. \\(\\omega_m\\): Angular frequency of shaft in electrical frame, i.e compensated for pole-pairs. \\(L_m\\): Magnetizing inductance. \\(L_m\\): Magnetizing inductance. \\(L_{s\\sigma}\\): Stator leakage inductance. \\(L_{r\\sigma}\\): Rotor leakage inductance. \\(L_s\\): Stator inductance. \\(L_s = L_m + L_{s\\sigma}\\) \\(L_r\\): Rotor inductance. \\(L_r = L_m + L_{r\\sigma}\\) \\(1-\\frac{L^2_m}{L_sL_r}\\): total leakage coefficient. \\(ms\\): magnetizing-stator super/subscript, stator flux oriented reference frame. \\(mr\\): magnetizing-rotor super/subscript, rotor flux oriented reference frame. \\(g\\): super/subscript, general reference frame. \\(\\tau_{em}\\): electro-magnetic torque. \\(N_{pp}\\): pole-pair number. 5.2 Introduction The general dynamic machine model in a rotating reference frame is first presented. Then it is shown how it is derived from the stationary reference frame equations. The rotor-flux oriented reference frame equations are derived. This particular model is often used for vector-oriented control from the stator side. 5.3 General Machine Model In short, the dynamics of the inductions machine is described by this dynamic vector model: \\[ \\begin{aligned} \\underline{v}_s &amp; = R_s \\underline{i}_s + \\frac{d\\underline{\\psi}_s}{dt} + j \\omega_g \\underline{\\psi}_s \\\\ \\underline{v}_r &amp; = R_r \\underline{i}_r + \\frac{d\\underline{\\psi}_r}{dt} + j (\\omega_g-\\omega_m) \\underline{\\psi}_r \\\\ \\underline{\\psi}_s &amp; = L_s \\underline{i}_s + L_m \\underline{i}_r\\\\ \\underline{\\psi}_r &amp; = L_m \\underline{i}_s + L_r \\underline{i}_r\\\\ \\tau_{em} &amp;= - \\frac{3}{2}N_{pp}L_m(\\underline{i}_s \\times \\underline{i}_r) \\end{aligned} \\tag{5.1} \\] This model is with motor sign, in a general reference frame g. In this notation all quantities are seen from the same side of the machine. So, when seen from the stator, the rotor current in not the physical rotor current, but the rotor current as seen from the stator. The same goes for flux, voltage and impedance. So we dont use a apostrophe to note that rotor quantities are transferred values, as it is sometimes done. This is not a special issue for a squirrel cage machine, where we do not have easy access to rotor quantities anyway, by we practically always look the the machine from the stator. But for the doubly-fed induction machine, where we have access to both the stator and the rotor circuit, special care must be taken to transfer values from one side to the other. 5.3.1 Stator Equation The stator equation in the stator reference frame is: \\[ \\begin{aligned} \\underline{v}_s &amp; = R_s \\underline{i}_s + \\frac{d\\underline{\\psi}_s}{dt} \\\\ \\end{aligned} \\tag{5.2} \\] We want to express this in a general reference frame, where \\(\\rho_s\\) is the angle from the stator fixed frame to the general reference frame. With the superscripts denoting the reference frames, s for stator, g for general, we can write: \\[ \\begin{aligned} \\underline{v}^s_s &amp; = \\underline{v}^g_s e^{j\\rho_s} \\\\ \\underline{i}^s_s &amp; = \\underline{i}^g_s e^{j\\rho_s} \\\\ \\underline{\\psi}^s_s &amp; = \\underline{\\psi}^g_s e^{j\\rho_s} \\\\ \\frac{d\\underline{\\psi}^s_s}{dt} &amp; = \\frac{d (\\underline{\\psi}^g_s e^{j\\rho_s} )}{dt} = \\frac{d\\underline{\\psi}^g_s}{dt} e^{j\\rho_s} + \\underline{\\psi}^g_s j \\omega_g e^{j\\rho_s}, \\omega_g = \\frac{d\\rho_s}{dt} \\\\ \\end{aligned} \\tag{5.3} \\] By inserting these in the stator equation above, we get: \\[ \\begin{aligned} \\underline{v}^s_s &amp; = R_s \\underline{i}^s_s + \\frac{d\\underline{\\psi}^s_s}{dt} \\\\ \\underline{v}^g_s e^{j\\rho_s} &amp; = R_s \\underline{i}^g_s e^{j\\rho_s} + \\frac{d\\underline{\\psi}^g_s}{dt} e^{j\\rho_s} + \\underline{\\psi}^g_s j \\omega_g e^{j\\rho_s} \\\\ \\underline{v}^g_s &amp; = R_s \\underline{i}^g_s + \\frac{d\\underline{\\psi}^g_s}{dt} + j\\underline{\\psi}^g_s \\omega_g \\\\ \\end{aligned} \\tag{5.4} \\] this is the general stator equation, see (5.1) 5.3.2 Rotor Equation The rotor equation in the rotor reference frame is: \\[ \\begin{aligned} \\underline{v}_r &amp; = R_r \\underline{i}_r + \\frac{d\\underline{\\psi}_r}{dt} \\\\ \\end{aligned} \\tag{5.5} \\] We want to express this in a general reference frame, where \\(\\rho_r\\) is the angle from the rotor fixed frame to the general reference frame. With the superscripts denoting the reference frames, r for rotor, g for general, we can write: \\[ \\begin{aligned} \\underline{v}^r_r &amp; = \\underline{v}^g_r e^{j\\rho_r} \\\\ \\underline{i}^r_r &amp; = \\underline{i}^g_r e^{j\\rho_r} \\\\ \\underline{\\psi}^r_r &amp; = \\underline{\\psi}^g_r e^{j\\rho_r} \\\\ \\frac{d\\underline{\\psi}^r_r}{dt} &amp; = \\frac{d (\\underline{\\psi}^g_r e^{j\\rho_r} )}{dt} = \\frac{d\\underline{\\psi}^g_r}{dt} e^{j\\rho_r} + \\underline{\\psi}^g_r j (\\omega_g-\\omega_r) e^{j\\rho_r}, \\omega_g-\\omega_r = \\frac{d\\rho_r}{dt} \\\\ \\end{aligned} \\tag{5.6} \\] By inserting these in the rotor equation above, we get: \\[ \\begin{aligned} \\underline{v}^r_r &amp; = R_r \\underline{i}^r_r + \\frac{d\\underline{\\psi}^r_r}{dt} \\\\ \\underline{v}^g_r e^{j\\rho_r} &amp; = R_r \\underline{i}^g_r e^{j\\rho_r} + \\frac{d\\underline{\\psi}^g_r}{dt} e^{j\\rho_r} + \\underline{\\psi}^g_r j (\\omega_g-\\omega_r) e^{j\\rho_r} \\\\ \\underline{v}^g_r &amp; = R_r \\underline{i}^g_r + \\frac{d\\underline{\\psi}^g_r}{dt} + j \\underline{\\psi}^g_r (\\omega_g-\\omega_r) \\\\ \\end{aligned} \\tag{5.7} \\] this is the general rotor equation, see (5.1) 5.3.3 Torque Equations The electrical torque can be expressed in terms of cross-product as: \\[ \\begin{aligned} \\tau_{em} &amp;= - \\frac{3}{2}N_{pp}L_m(\\underline{i}_s \\times \\underline{i}_r) \\\\ &amp;= - \\frac{3}{2}N_{pp}L_m(i_{sd}i_{rq} - i_{sq}i_{rd}) \\\\ &amp;= - \\frac{3}{2}N_{pp}L_m Im(\\underline{i}^*_s \\cdot \\underline{i}_r) \\\\ \\end{aligned} \\tag{5.8} \\] The last line contains the imaginary part of the complex-conjugate stator current and the rotor current. The torque can be calculated in various other ways, to be elaborated. 5.4 Rotor-flux Oriented Model For the rotor-flux oriented Model, the d-axis is oriented with the rotor flux, so the rotor-flux has no q-axis component. The rotor magnetizing current \\(\\underline{i}_{mr}\\) is defined as: \\[ \\underline{i}_{mr} = \\frac{\\underline{\\psi}_r}{L_m}= \\frac{L_m\\underline{i}_s+L_r\\underline{i}_r}{L_m} = \\underline{i}_s+ \\frac{L_r}{L_m}\\underline{i}_r \\tag{5.9} \\] \\[ \\underline{i}_r = \\frac{L_m}{L_r} (\\underline{i}_{mr} - \\underline{i}_s) \\tag{5.10} \\] The stator flux can be calculated as: \\[ \\begin{aligned} \\underline{\\psi}_s &amp; = L_s\\underline{i}_s + L_m\\underline{i}_r \\\\ &amp; = L_s\\underline{i}_s + L_m \\frac{L_m}{L_r} (\\underline{i}_{mr} - \\underline{i}_s) \\\\ &amp; = \\frac{L^2_m}{L_r}\\underline{i}_{mr} + L_s\\underline{i}_s - \\frac{L^2_m}{L_r} \\underline{i}_s \\\\ &amp; = \\frac{L^2_m}{L_r}\\underline{i}_{mr} + L_s(1 - \\frac{L^2_m}{L_s L_r} ) \\underline{i}_s \\\\ &amp; = \\frac{L^2_m}{L_r}\\underline{i}_{mr} + \\sigma L_s \\underline{i}_s \\\\ \\end{aligned} \\tag{5.11} \\] the leakage constant being defined as: \\(\\sigma=1 - \\frac{L^2_m}{L_s L_r}\\) 5.4.1 Rotor voltage equation (rotor-flux oriented) \\[ \\begin{aligned} \\underline{v}^{mr}_r &amp; = R_r \\underline{i}^{mr}_r + \\frac{d\\underline{\\psi}^{mr}_r}{dt} + j (\\omega_{mr}-\\omega_r) \\underline{\\psi}^{mr}_r \\\\ &amp; = R_r \\frac{L_m}{L_r} (\\underline{i}_{mr} - \\underline{i}_s) + \\frac{d ( L_m \\underline{i}_{mr}) }{dt} + j (\\omega_{mr}-\\omega_r) L_m \\underline{i}_{mr} \\\\ &amp; = -\\underline{i}_s R_r \\frac{L_m}{L_r} + L_m \\frac{d \\underline{i}_{mr} }{dt} + R_r \\frac{L_m}{L_r} \\underline{i}_{mr} + j (\\omega_{mr}-\\omega_r) L_m \\underline{i}_{mr} \\\\ \\end{aligned} \\tag{5.12} \\] \\[ \\begin{aligned} \\frac{L_r}{R_r L_m} \\underline{v}^{mr}_r &amp; = -\\underline{i}^{mr}_s + \\frac{L_r}{R_r} \\frac{d \\underline{i}_{mr} }{dt} + \\underline{i}_{mr} + j (\\omega_{mr}-\\omega_r) \\frac{L_r}{R_r} \\underline{i}_{mr} \\\\ \\frac{L_r}{R_r L_m} \\underline{v}^{mr}_r +\\underline{i}^{mr}_s &amp; = \\frac{L_r}{R_r} \\frac{d \\underline{i}_{mr} }{dt} + \\underline{i}_{mr} + j (\\omega_{mr}-\\omega_r) \\frac{L_r}{R_r} \\underline{i}_{mr} \\\\ \\end{aligned} \\tag{5.13} \\] \\[ \\begin{aligned} \\frac{L_r}{R_r L_m} v_{rd} +i_{sd} &amp; = \\frac{L_r}{R_r} \\frac{d i_{mr} }{dt} + i_{mr} \\\\ \\frac{L_r}{R_r L_m} v_{rq} +i_{sq} &amp; = (\\omega_{mr}-\\omega_r) \\frac{L_r}{R_r} i_{mr} \\\\ \\end{aligned} \\tag{5.14} \\] 5.4.2 Stator voltage equation (rotor-flux oriented) \\[ \\begin{aligned} \\underline{v}^{mr}_s &amp; = R_s \\underline{i}^{mr}_s + \\frac{d\\underline{\\psi}^{mr}_s}{dt} + j\\omega_{mr} \\underline{\\psi}^{mr}_s \\\\ &amp; = R_s \\underline{i}^{mr}_s + \\frac{d}{dt}(\\frac{L^2_m}{L_r}\\underline{i}^{mr}_{mr} + \\sigma L_s \\underline{i}_s) + j\\omega_{mr} (\\frac{L^2_m}{L_r}\\underline{i}^{mr}_{mr} + \\sigma L_s \\underline{i}_s) \\\\ &amp; = R_s \\underline{i}^{mr}_s + \\frac{d}{dt}( (1-\\sigma)L_s i_{mr} + \\sigma L_s \\underline{i}_s) + j\\omega_{mr} ((1-\\sigma)L_s i_{mr} + \\sigma L_s \\underline{i}_s) \\\\ \\end{aligned} \\tag{5.15} \\] \\[ \\begin{aligned} v_{sd} &amp; = R_s i_{sd} + \\sigma L_s \\frac{d i_{sd}}{dt} + (1-\\sigma)L_s \\frac{d i_{mr}}{dt} - \\omega_{mr} \\sigma L_s i_{sq} \\\\ v_{sq} &amp; = R_s i_{sq} + \\sigma L_s \\frac{d i_{sq}}{dt} + \\omega_{mr} ((1-\\sigma)L_s i_{mr} + \\sigma L_s i_{sd}) \\\\ \\end{aligned} \\tag{5.16} \\] 5.4.3 Torque equation (rotor-flux oriented) The electrical torque can be expressed in terms of cross-product as: \\[ \\begin{aligned} \\tau_{em} &amp;= - \\frac{3}{2}N_{pp}L_m(i_{sd}i_{rq} - i_{sq}i_{rd}) \\\\ &amp;= \\frac{3}{2}N_{pp}L_m i_{rd} i_{sq} \\\\ \\end{aligned} \\tag{5.17} \\] "],["pm-machine.html", "Chapter 6 PM Machine 6.1 Nomenclature 6.2 Machine Equations 6.3 Maximum Torque Per Ampere (MTPA)", " Chapter 6 PM Machine 6.1 Nomenclature \\(R_s\\): Stator resistance. \\(\\psi_{pm}\\): Permament magnet flux linkage. \\(\\omega_m\\): Angular frequency of shaft in electrical frame, i.e compensated for pole-pairs. \\(L_d\\): d-axis inductance. \\(L_q\\): q-axis inductance. \\(\\tau_{em}\\): Electro-magnetic torque. \\(N_{pp}\\): Pole-pair number. 6.2 Machine Equations \\[ \\begin{aligned} v_d &amp; = R_s i_d + L_d\\frac{di_d}{dt} - j \\omega_m L_q i_q \\\\ v_q &amp; = R_s i_q + L_q\\frac{di_q}{dt} + j \\omega_m (L_d i_d + \\psi_{pm}) \\\\ \\tau_{em} &amp; = (\\psi_{pm} + (L_d-L_q) i_d)i_q \\\\ \\end{aligned} \\tag{6.1} \\] 6.3 Maximum Torque Per Ampere (MTPA) MTPA is a commonly used control strategy by which the current is controlled to produce the maximum torque for at given current amplitude. It is shown here how the control equations are derived. This is done from the torque equation: \\[ \\begin{aligned} T_{em} &amp; = (\\psi_{pm} + (L_d-L_q) i_d)i_q \\\\ \\end{aligned} \\tag{6.2} \\] The current amplitude is: \\[ |\\underline{i}| = \\sqrt{i^2_d + i^2_q} \\Rightarrow i_q = (|\\underline{i}|^2 - i^2_d)^{1/2} \\tag{6.3} \\] Inserting this in the torque equations, we get: \\[ \\begin{aligned} T_{em} &amp; = (\\psi_{pm} + (L_d-L_q) i_d)(|\\underline{i}|^2 - i^2_d)^{1/2} \\\\ &amp; = \\psi_{pm}(|\\underline{i}|^2 - i^2_d)^{1/2} + (L_d-L_q) i_d(|\\underline{i}|^2 - i^2_d)^{1/2} \\\\ \\end{aligned} \\tag{6.4} \\] This equation describes, for for at given current amplitude, how the torque varies as a function of \\(i_d\\). By differentiating, we can find the \\(i_d\\), which gives the maximum torque for the given current amplitude \\(|\\underline{i}|\\). \\[ \\begin{aligned} \\frac{\\partial T_{em}}{\\partial i_d} &amp; = \\psi_{pm}\\frac{1}{2} (|\\underline{i}|^2 - i^2_d)^{-1/2} (-2i_d) + (L_d-L_q) \\left( (|\\underline{i}|^2 - i^2_d)^{1/2} + i_d \\frac{1}{2} (|\\underline{i}|^2 - i^2_d)^{-1/2} (-2i_d) \\right) \\\\ &amp; = -\\psi_{pm} i_d (|\\underline{i}|^2 - i^2_d)^{-1/2} + (L_d-L_q) \\left( (|\\underline{i}|^2 - i^2_d)^{1/2} - i_d^2 (|\\underline{i}|^2 - i^2_d)^{-1/2} \\right) \\\\ \\end{aligned} \\tag{6.4} \\] We can now set the differential equal to zero: \\[ \\begin{aligned} \\frac{\\partial T_{em}}{\\partial i_d} &amp; = 0 \\\\ -\\psi_{pm} i_d (|\\underline{i}|^2 - i^2_d)^{-1/2} + (L_d-L_q) \\left( (|\\underline{i}|^2 - i^2_d)^{1/2} - i_d^2 (|\\underline{i}|^2 - i^2_d)^{-1/2} \\right) &amp; = 0 \\\\ -\\psi_{pm} i_d + (L_d-L_q) \\left( |\\underline{i}|^2 - i^2_d - i_d ^2 \\right) &amp; = 0 \\\\ -\\psi_{pm} i_d + (L_d-L_q) ( |\\underline{i}|^2 - 2i^2_d ) &amp; = 0 \\\\ 2 (L_d-L_q)i^2_d +\\psi_{pm} i_d - (L_d-L_q) |\\underline{i}|^2 &amp; = 0 \\\\ \\end{aligned} \\tag{6.5} \\] The MTPA d-current is now given as: \\[ \\begin{aligned} i_d &amp;= \\frac{-\\psi_{pm} - \\sqrt{\\psi_{pm}^2 - 8 (L_d-L_q)^2 |\\underline{i}|^2}}{4 (L_d-L_q)} \\\\ &amp;= \\frac{-\\psi_{pm} }{4 (L_d-L_q)} - \\sqrt{\\frac{\\psi_{pm}^2}{16 (L_d-L_q)^2} - \\frac{1}{2} |\\underline{i}|^2}\\\\ \\end{aligned} \\tag{6.6} \\] And and q-current is calculated as: \\[ i_q = \\sqrt{|\\underline{i}|^2 - i^2_d } \\tag{6.7} \\] "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
